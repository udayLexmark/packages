<?xml version="1.0" encoding="UTF-8"?>

<Values version="2.0">
  <value name="shared">ICAgIHByaXZhdGUgc3RhdGljIFN0cmluZyBxdWVyeU5vdGlmaWNhdGlvblN0YXRlKFN0cmluZyBu
b2RlTmFtZSkgdGhyb3dzIEV4Y2VwdGlvbgogICAgewogICAgICAgIElEYXRhIGlucHV0ID0gSURh
dGFGYWN0b3J5LmNyZWF0ZSgpOwogICAgICAgIElEYXRhQ3Vyc29yIGlkY0lucHV0ID0gaW5wdXQu
Z2V0Q3Vyc29yKCk7CiAgICAgICAgaWRjSW5wdXQuaW5zZXJ0QWZ0ZXIoIm5vdGlmaWNhdGlvbk5h
bWUiLCBub2RlTmFtZSk7CiAgICAgICAgaWRjSW5wdXQuZGVzdHJveSgpOwogICAgICAgIElEYXRh
IG91dHB1dCA9IFNlcnZpY2UuZG9JbnZva2UoTlNfcXVlcnlTdGF0ZSwgaW5wdXQpOwogICAgICAg
IElEYXRhQ3Vyc29yIGlkY091dHB1dCA9IG91dHB1dC5nZXRDdXJzb3IoKTsKICAgICAgICBTdHJp
bmcgbm90aWZpY2F0aW9uU3RhdGUgPSBJRGF0YVV0aWwuZ2V0U3RyaW5nKGlkY091dHB1dCwgIm5v
dGlmaWNhdGlvblN0YXRlIik7CiAgICAgICAgaWRjT3V0cHV0LmRlc3Ryb3koKTsKICAgICAgICBy
ZXR1cm4gbm90aWZpY2F0aW9uU3RhdGU7CiAgICB9CgogICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBk
aXNhYmxlTm90aWZpY2F0aW9uKFN0cmluZyBub2RlTmFtZSkgdGhyb3dzIEV4Y2VwdGlvbgogICAg
ewogICAgICAgIElEYXRhIGlucHV0ID0gSURhdGFGYWN0b3J5LmNyZWF0ZSgpOwogICAgICAgIElE
YXRhQ3Vyc29yIGlkY0lucHV0ID0gaW5wdXQuZ2V0Q3Vyc29yKCk7CiAgICAgICAgaWRjSW5wdXQu
aW5zZXJ0QWZ0ZXIoIm5vdGlmaWNhdGlvbk5hbWUiLCBub2RlTmFtZSk7CiAgICAgICAgaWRjSW5w
dXQuZGVzdHJveSgpOwogICAgICAgIFNlcnZpY2UuZG9JbnZva2UoTlNfZGlzYWJsZSwgaW5wdXQp
OwogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIE9iamVjdFtdIGdldE5vdGlmaWNhdGlvblByb3Bl
cnRpZXMoU3RyaW5nIG5vZGVOYW1lKSB0aHJvd3MgQWRhcHRlclNlcnZpY2VFeGNlcHRpb24sIEV4
Y2VwdGlvbgogICAgewogICAgICAgIElEYXRhIGlucHV0ID0gSURhdGFGYWN0b3J5LmNyZWF0ZSgp
OwogICAgICAgIElEYXRhQ3Vyc29yIGlkY0lucHV0ID0gaW5wdXQuZ2V0Q3Vyc29yKCk7CiAgICAg
ICAgaWRjSW5wdXQuaW5zZXJ0QWZ0ZXIoIm5vZGVOYW1lIiwgbm9kZU5hbWUpOwogICAgICAgIGlk
Y0lucHV0LmRlc3Ryb3koKTsKICAgICAgICBJRGF0YSBvdXRwdXQgPSBTZXJ2aWNlLmRvSW52b2tl
KE5TX3F1ZXJ5UHJvcGVydHksIGlucHV0KTsKICAgICAgICBJRGF0YUN1cnNvciBpZGNPdXRwdXQg
PSBvdXRwdXQuZ2V0Q3Vyc29yKCk7CiAgICAgICAgT2JqZWN0W10gcHJvcHMgPSBuZXcgT2JqZWN0
WzRdOwogICAgICAgIHByb3BzWzBdID0gSURhdGFVdGlsLmdldChpZGNPdXRwdXQsICJub3RpZmlj
YXRpb25DbGFzc05hbWUiKTsKCiAgICAgICAgU3RyaW5nIG5vdGlmaWNhdGlvbiA9IChTdHJpbmcp
cHJvcHNbMF07CiAgICAgICAgaWYgKG5vdGlmaWNhdGlvbiA9PSBudWxsKQogICAgICAgICAgICB0
aHJvdyBjcmVhdGVBZGFwdGVyU2VydmljZUV4Y2VwdGlvbihKREJDQ29uc3RhbnRzLkpTX25vdE5v
dGlmaWNhdGlvbik7CgkJU3RyaW5nIHByb3BlcnR5TmFtZSA9IG51bGw7CgkJaWYgKG5vdGlmaWNh
dGlvbi5lcXVhbHMoImNvbS53bS5hZGFwdGVyLndtamRiYy5ub3RpZmljYXRpb25zLk9yZGVyZWRO
b3RpZmljYXRpb24iKSkKCQkJcHJvcGVydHlOYW1lID0gInNvdXJjZVRhYmxlcy5zY2hlbWFOYW1l
IjsKCQllbHNlIGlmIChub3RpZmljYXRpb24uZXF1YWxzKCJjb20ud20uYWRhcHRlci53bWpkYmMu
bm90aWZpY2F0aW9ucy5JbnNlcnROb3RpZmljYXRpb24iKQoJCQl8fCBub3RpZmljYXRpb24uZXF1
YWxzKCJjb20ud20uYWRhcHRlci53bWpkYmMubm90aWZpY2F0aW9ucy5VcGRhdGVOb3RpZmljYXRp
b24iKQoJCQl8fCBub3RpZmljYXRpb24uZXF1YWxzKCJjb20ud20uYWRhcHRlci53bWpkYmMubm90
aWZpY2F0aW9ucy5EZWxldGVOb3RpZmljYXRpb24iKQoJCQl8fCBub3RpZmljYXRpb24uZXF1YWxz
KCJjb20ud20uYWRhcHRlci53bWpkYmMubm90aWZpY2F0aW9ucy5CYXNpY05vdGlmaWNhdGlvbiIp
KQoJCQlwcm9wZXJ0eU5hbWUgPSAidGFibGVzLnNjaGVtYU5hbWUiOwoJCWVsc2UKICAgICAgICAg
ICAgdGhyb3cgY3JlYXRlQWRhcHRlclNlcnZpY2VFeGNlcHRpb24oSkRCQ0NvbnN0YW50cy5KU19u
b3RTdXBwb3J0LAoJCQkJCQkJCQluZXcgU3RyaW5nW117bm9kZU5hbWV9KTsKICAgICAgICBwcm9w
c1sxXSA9IHByb3BlcnR5TmFtZTsKCiAgICAgICAgSURhdGEgbm90aWZpY2F0aW9uUHJvcGVydGll
cyA9IChJRGF0YSkgSURhdGFVdGlsLmdldChpZGNPdXRwdXQsICJub3RpZmljYXRpb25Qcm9wZXJ0
aWVzIik7CiAgICAgICAgSURhdGFDdXJzb3IgaWRjTm90aWZpY2F0aW9uUHJvcGVydGllcyA9IG5v
dGlmaWNhdGlvblByb3BlcnRpZXMuZ2V0Q3Vyc29yKCk7CiAgICAgICAgcHJvcHNbMl0gPSBJRGF0
YVV0aWwuZ2V0KGlkY05vdGlmaWNhdGlvblByb3BlcnRpZXMsICJkZXNpZ25UaW1lTG9jYWxlIik7
CiAgICAgICAgcHJvcHNbM10gPSBJRGF0YVV0aWwuZ2V0KGlkY05vdGlmaWNhdGlvblByb3BlcnRp
ZXMsIHByb3BlcnR5TmFtZSk7CiAgICAgICAgaWRjTm90aWZpY2F0aW9uUHJvcGVydGllcy5kZXN0
cm95KCk7CiAgICAgICAgaWRjT3V0cHV0LmRlc3Ryb3koKTsKCiAgICAgICAgaWYgKHByb3BzWzNd
ID09IG51bGwpCiAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVBZGFwdGVyU2VydmljZUV4Y2Vw
dGlvbihKREJDQ29uc3RhbnRzLkpTX25vU2NoZW1hKTsKCiAgICAgICAgcmV0dXJuIHByb3BzOwog
ICAgfQoKICAgIHByaXZhdGUgc3RhdGljIHZvaWQgdXBkYXRlTm90aWZpY2F0aW9uUHJvcGVydHko
U3RyaW5nIG5vZGVOYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJp
bmcgcHJvcGVydHlOYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJp
bmdbXSBzY2hlbWFMaXN0KSB0aHJvd3MgRXhjZXB0aW9uCiAgICB7CiAgICAgICAgSURhdGEgbWV0
YURhdGFTZXR0aW5nID0gSURhdGFGYWN0b3J5LmNyZWF0ZSgpOwogICAgICAgIElEYXRhQ3Vyc29y
IGlkY01ldGFEYXRhU2V0dGluZyA9IG1ldGFEYXRhU2V0dGluZy5nZXRDdXJzb3IoKTsKICAgICAg
ICBJRGF0YVV0aWwucHV0KGlkY01ldGFEYXRhU2V0dGluZywgcHJvcGVydHlOYW1lLCBzY2hlbWFM
aXN0KTsKICAJICAgIGlkY01ldGFEYXRhU2V0dGluZy5kZXN0cm95KCk7CgogICAgICAgIElEYXRh
IGlucHV0ID0gSURhdGFGYWN0b3J5LmNyZWF0ZSgpOwogICAgICAgIElEYXRhQ3Vyc29yIGlkY0lu
cHV0ID0gaW5wdXQuZ2V0Q3Vyc29yKCk7CiAgICAgICAgaWRjSW5wdXQuaW5zZXJ0QWZ0ZXIoIm5v
dGlmaWNhdGlvbk5hbWUiLCBub2RlTmFtZSk7CiAgICAgICAgaWRjSW5wdXQuaW5zZXJ0QWZ0ZXIo
Im5vdGlmaWNhdGlvblNldHRpbmdzIiwgbWV0YURhdGFTZXR0aW5nKTsKICAgICAgICBpZGNJbnB1
dC5kZXN0cm95KCk7CgogICAgICAgIFNlcnZpY2UuZG9JbnZva2UoTlNfdXBkYXRlUHJvcGVydHks
IGlucHV0KTsKICAgIH0KCiAgICBwcml2YXRlIHN0YXRpYyB2b2lkIGVuYWJsZU5vdGlmaWNhdGlv
bihTdHJpbmcgbm9kZU5hbWUpIHRocm93cyBFeGNlcHRpb24KICAgIHsKICAgICAgICBJRGF0YSBp
bnB1dCA9IElEYXRhRmFjdG9yeS5jcmVhdGUoKTsKICAgICAgICBJRGF0YUN1cnNvciBpZGNJbnB1
dCA9IGlucHV0LmdldEN1cnNvcigpOwogICAgICAgIGlkY0lucHV0Lmluc2VydEFmdGVyKCJub3Rp
ZmljYXRpb25OYW1lIiwgbm9kZU5hbWUpOwogICAgICAgIGlkY0lucHV0LmRlc3Ryb3koKTsKICAg
ICAgICBJRGF0YSBvdXRwdXQgPSBTZXJ2aWNlLmRvSW52b2tlKE5TX2VuYWJsZSwgaW5wdXQpOwog
ICAgfQoKICAgIHByaXZhdGUgc3RhdGljIEFkYXB0ZXJTZXJ2aWNlRXhjZXB0aW9uIGNyZWF0ZUFk
YXB0ZXJTZXJ2aWNlRXhjZXB0aW9uKGludCBtaW5vckNvZGUpCiAgICB7CiAgICAgICAgV21BZGFw
dGVyIGFkcEluc3QgPSBKREJDQWRhcHRlci5nZXRJbnN0YW5jZSgpOwogICAgICAgIEFkYXB0ZXJT
ZXJ2aWNlRXhjZXB0aW9uIGV4ID0KICAgICAgICAgICAgbmV3IEFkYXB0ZXJTZXJ2aWNlRXhjZXB0
aW9uKGFkcEluc3QuZ2V0QWRhcHRlclJlc291cmNlQnVuZGxlTWFuYWdlcigpLAogICAgICAgICAg
ICBJbnRlZ2VyLnRvU3RyaW5nKGFkcEluc3QuZ2V0QWRhcHRlck1ham9yQ29kZSgpKSwgSW50ZWdl
ci50b1N0cmluZyhtaW5vckNvZGUpLAogICAgICAgICAgICBudWxsLCBudWxsLCBudWxsKTsKICAg
ICAgICByZXR1cm4gZXg7CiAgICB9CgogICAgIHByaXZhdGUgc3RhdGljIE9iamVjdFtdIGdldFNl
cnZpY2VQcm9wZXJ0aWVzKFN0cmluZyBub2RlTmFtZSkgdGhyb3dzIEFkYXB0ZXJTZXJ2aWNlRXhj
ZXB0aW9uLCBFeGNlcHRpb24KICAgIHsKICAgICAgICBJRGF0YSBpbnB1dCA9IElEYXRhRmFjdG9y
eS5jcmVhdGUoKTsKICAgICAgICBJRGF0YUN1cnNvciBpZGNJbnB1dCA9IGlucHV0LmdldEN1cnNv
cigpOwogICAgICAgIGlkY0lucHV0Lmluc2VydEFmdGVyKCJub2RlTmFtZSIsIG5vZGVOYW1lKTsK
ICAgICAgICBpZGNJbnB1dC5kZXN0cm95KCk7CiAgICAgICAgSURhdGEgb3V0cHV0ID0gU2Vydmlj
ZS5kb0ludm9rZShOU19xdWVyeVNlcnZpY2VQcm9wZXJ0eSwgaW5wdXQpOwogICAgICAgIElEYXRh
Q3Vyc29yIGlkY091dHB1dCA9IG91dHB1dC5nZXRDdXJzb3IoKTsKICAgICAgICBJRGF0YSBzcnZE
YXRhID0gKElEYXRhKUlEYXRhVXRpbC5nZXQoaWRjT3V0cHV0LCAiYWRhcHRlclNlcnZpY2VEYXRh
Iik7CiAgICAgICAgaWYgKHNydkRhdGEgPT0gbnVsbCkKICAgICAgICAgICAgdGhyb3cgY3JlYXRl
QWRhcHRlclNlcnZpY2VFeGNlcHRpb24oSkRCQ0NvbnN0YW50cy5KU19ub3RTZXJ2aWNlKTsKICAg
ICAgICBJRGF0YUN1cnNvciBpZGNTcnZEYXRhID0gc3J2RGF0YS5nZXRDdXJzb3IoKTsKICAgICAg
ICBPYmplY3RbXSBwcm9wcyA9IG5ldyBPYmplY3RbNl07CiAgICAgICAgcHJvcHNbMF0gPSBJRGF0
YVV0aWwuZ2V0KGlkY1NydkRhdGEsICJzZXJ2aWNlVGVtcGxhdGVOYW1lIik7CiAgICAgICAgCiAg
ICAgICAgSURhdGEgc2VydmljZVByb3BlcnRpZXMgPSAoSURhdGEpIElEYXRhVXRpbC5nZXQoaWRj
U3J2RGF0YSwgInRlbXBsYXRlUHJvcGVydGllcyIpOwogICAgICAgIElEYXRhQ3Vyc29yIGlkY1Nl
cnZpY2VQcm9wZXJ0aWVzID0gc2VydmljZVByb3BlcnRpZXMuZ2V0Q3Vyc29yKCk7CgogICAgICAg
IFN0cmluZyBzZXJ2aWNlID0gKFN0cmluZylwcm9wc1swXTsKICAgICAgICBpZiAoc2VydmljZSA9
PSBudWxsKQogICAgICAgICAgICB0aHJvdyBjcmVhdGVBZGFwdGVyU2VydmljZUV4Y2VwdGlvbihK
REJDQ29uc3RhbnRzLkpTX25vdFNlcnZpY2UpOwoJCVN0cmluZyBwcm9wZXJ0eU5hbWUgPSBudWxs
OwoJCWlmIChzZXJ2aWNlLmVxdWFscygiY29tLndtLmFkYXB0ZXIud21qZGJjLnNlcnZpY2VzLklu
c2VydCIpCgkJCQl8fCBzZXJ2aWNlLmVxdWFscygiY29tLndtLmFkYXB0ZXIud21qZGJjLnNlcnZp
Y2VzLkJhdGNoSW5zZXJ0IikKCQkJCXx8IHNlcnZpY2UuZXF1YWxzKCJjb20ud20uYWRhcHRlci53
bWpkYmMuc2VydmljZXMuQmF0Y2hVcGRhdGUiKQkJCQkKCQkJfHwgc2VydmljZS5lcXVhbHMoImNv
bS53bS5hZGFwdGVyLndtamRiYy5zZXJ2aWNlcy5VcGRhdGUiKQoJCQl8fCBzZXJ2aWNlLmVxdWFs
cygiY29tLndtLmFkYXB0ZXIud21qZGJjLnNlcnZpY2VzLkRlbGV0ZSIpCgkJCXx8IHNlcnZpY2Uu
ZXF1YWxzKCJjb20ud20uYWRhcHRlci53bWpkYmMuc2VydmljZXMuU2VsZWN0IikpCgkJCXByb3Bl
cnR5TmFtZSA9ICJ0YWJsZXMuc2NoZW1hTmFtZSI7CgkJZWxzZSBpZihzZXJ2aWNlLmVxdWFscygi
Y29tLndtLmFkYXB0ZXIud21qZGJjLnNlcnZpY2VzLlN0b3JlZFByb2NlZHVyZVdpdGhTaWduYXR1
cmUiKSkKCQl7CgkJCQlwcm9wZXJ0eU5hbWUgPSAicHJvY2VkdXJlU2lnbmF0dXJlLnNjaGVtYU5h
bWUiOwoJCQkJU3RyaW5nIHBOYW1lID0gInByb2NlZHVyZVNpZ25hdHVyZS5wcm9jZWR1cmVOYW1l
IjsKCQkJCXByb3BzWzRdID0gcE5hbWU7CgkJCQlwcm9wc1s1XSA9IElEYXRhVXRpbC5nZXQoaWRj
U2VydmljZVByb3BlcnRpZXMsIHBOYW1lKTsKCQl9CgkJZWxzZSBpZihzZXJ2aWNlLmVxdWFscygi
Y29tLndtLmFkYXB0ZXIud21qZGJjLnNlcnZpY2VzLlN0b3JlZFByb2NlZHVyZSIpKQoJCXsKCQkJ
CXByb3BlcnR5TmFtZSA9ICJwcm9jZWR1cmUuc2NoZW1hTmFtZSI7CgkJCQlTdHJpbmcgcE5hbWUg
PSAicHJvY2VkdXJlLnByb2NlZHVyZU5hbWUiOwoJCQkJcHJvcHNbNF0gPSBwTmFtZTsKCQkJCXBy
b3BzWzVdID0gSURhdGFVdGlsLmdldChpZGNTZXJ2aWNlUHJvcGVydGllcywgcE5hbWUpOwoJCX1l
bHNlCiAgICAgICAgICAgIHRocm93IGNyZWF0ZUFkYXB0ZXJTZXJ2aWNlRXhjZXB0aW9uKEpEQkND
b25zdGFudHMuSlNfbm90U3VwcG9ydCwKCQkJCQkJCQkJbmV3IFN0cmluZ1tde3NlcnZpY2V9KTsK
ICAgICAgICBwcm9wc1sxXSA9IHByb3BlcnR5TmFtZTsKCiAgICAgICAgcHJvcHNbMl0gPSBJRGF0
YVV0aWwuZ2V0KGlkY1NlcnZpY2VQcm9wZXJ0aWVzLCAiZGVzaWduVGltZUxvY2FsZSIpOwogICAg
ICAgIHByb3BzWzNdID0gSURhdGFVdGlsLmdldChpZGNTZXJ2aWNlUHJvcGVydGllcywgcHJvcGVy
dHlOYW1lKTsKCgoKICAgICAgICBpZGNTZXJ2aWNlUHJvcGVydGllcy5kZXN0cm95KCk7CiAgICAg
ICAgaWRjU3J2RGF0YS5kZXN0cm95KCk7CiAgICAgICAgaWRjT3V0cHV0LmRlc3Ryb3koKTsKCiAg
ICAgICAgaWYgKHByb3BzWzNdID09IG51bGwpCiAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVB
ZGFwdGVyU2VydmljZUV4Y2VwdGlvbihKREJDQ29uc3RhbnRzLkpTX25vU2NoZW1hU2VydmljZSk7
CgogICAgICAgIHJldHVybiBwcm9wczsKICAgIH0KCgoJcHJpdmF0ZSBzdGF0aWMgdm9pZCB1cGRh
dGVTZXJ2aWNlUHJvcGVydHkoU3RyaW5nIG5vZGVOYW1lLCBTdHJpbmdbXSBwcm9wZXJ0eU5hbWUs
IE9iamVjdFtdIHByb3BlcnR5VmFsdWUpCgkJCXRocm93cyBFeGNlcHRpb24gewoJCUlEYXRhIG1l
dGFEYXRhU2V0dGluZyA9IElEYXRhRmFjdG9yeS5jcmVhdGUoKTsKCQlJRGF0YUN1cnNvciBpZGNN
ZXRhRGF0YVNldHRpbmcgPSBtZXRhRGF0YVNldHRpbmcuZ2V0Q3Vyc29yKCk7CgkJZm9yKGludCBp
PTA7aTxwcm9wZXJ0eU5hbWUubGVuZ3RoO2krKykKCQl7CgkJCUlEYXRhVXRpbC5wdXQoaWRjTWV0
YURhdGFTZXR0aW5nLCBwcm9wZXJ0eU5hbWVbaV0sIHByb3BlcnR5VmFsdWVbaV0pOwoJCX0KCQlp
ZGNNZXRhRGF0YVNldHRpbmcuZGVzdHJveSgpOwoKCQlJRGF0YSBpbnB1dCA9IElEYXRhRmFjdG9y
eS5jcmVhdGUoKTsKCQlJRGF0YUN1cnNvciBpZGNJbnB1dCA9IGlucHV0LmdldEN1cnNvcigpOwoJ
CWlkY0lucHV0Lmluc2VydEFmdGVyKCJzZXJ2aWNlTmFtZSIsIG5vZGVOYW1lKTsKCQlpZGNJbnB1
dC5pbnNlcnRBZnRlcigiYWRhcHRlclNlcnZpY2VTZXR0aW5ncyIsIG1ldGFEYXRhU2V0dGluZyk7
CgkJaWRjSW5wdXQuZGVzdHJveSgpOwoKCQlTZXJ2aWNlLmRvSW52b2tlKE5TX3VwZGF0ZVNlcnZp
Y2VQcm9wZXJ0eSwgaW5wdXQpOwoJfQoKCiAgICBwcml2YXRlIHN0YXRpYyBOb2RlTGlzdCBsb2Fk
Q29ubmVjdGlvbnMoU3RyaW5nIGZpbGVOYW1lKSB0aHJvd3MgRXhjZXB0aW9uCiAgICB7CiAgICAg
ICAgLy8gR2V0IHRoZSBmYWN0b3J5CiAgICAgICAgRG9jdW1lbnRCdWlsZGVyRmFjdG9yeSBkYmYg
PSBEb2N1bWVudEJ1aWxkZXJGYWN0b3J5Lm5ld0luc3RhbmNlKCk7CiAgICAgICAgZGJmLnNldEZl
YXR1cmUoImh0dHA6Ly94bWwub3JnL3NheC9mZWF0dXJlcy9leHRlcm5hbC1nZW5lcmFsLWVudGl0
aWVzIixmYWxzZSk7IAogICAgICAgIGRiZi5zZXRGZWF0dXJlKCJodHRwOi8vYXBhY2hlLm9yZy94
bWwvZmVhdHVyZXMvbm9udmFsaWRhdGluZy9sb2FkLWV4dGVybmFsLWR0ZCIsIGZhbHNlKTsKICAg
ICAgICAvL1VzaW5nIGZhY3RvcnkgZ2V0IGFuIGluc3RhbmNlIG9mIGRvY3VtZW50IGJ1aWxkZXIK
ICAgICAgICBEb2N1bWVudEJ1aWxkZXIgZGIgPSBkYmYubmV3RG9jdW1lbnRCdWlsZGVyKCk7CiAg
ICAgICAgRG9jdW1lbnQgIGRvbSA9IGRiLnBhcnNlKGZpbGVOYW1lKTsKICAgICAgICAvLyBHZXQg
dGhlIHJvb3QgZWxlbWVtdAogICAgICAgIEVsZW1lbnQgZG9jRWxlID0gZG9tLmdldERvY3VtZW50
RWxlbWVudCgpOwogICAgICAgIC8vR2V0IGEgbm9kZWxpc3Qgb2YgPENvbm5lY3Rpb24+IGVsZW1l
bnRzCiAgICAgICAgTm9kZUxpc3QgbmwgPSBkb2NFbGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIkNv
bm5lY3Rpb24iKTsKCiAgICAgICAgcmV0dXJuIG5sOwogICAgfQoKICAgIC8qKgogICAgICogSSB0
YWtlIGEgeG1sIGVsZW1lbnQgYW5kIHRoZSB0YWcgbmFtZSwgbG9vayBmb3IgdGhlIHRhZyBhbmQg
Z2V0CiAgICAgKiB0aGUgdGV4dCBjb250ZW50CiAgICAgKiBpLmUgZm9yIDxjb25uZWN0aW9uPjxw
YWNha2FnZU5hbWU+SkRCQzwvcGFjYWthZ2VOYW1lPjwvY29ubmVjdGlvbj4geG1sIHNuaXBwZXQg
aWYKICAgICAqIHRoZSBFbGVtZW50IHBvaW50cyB0byBjb25uZWN0aW9uIG5vZGUgYW5kIHRhZ05h
bWUgaXMgcGFjYWthZ2VOYW1lIGl0IHdpbGwgcmV0dXJuIEpEQkMKICAgICAqIEBwYXJhbSBlbGUK
ICAgICAqIEBwYXJhbSB0YWdOYW1lCiAgICAgKiBAcmV0dXJuCiAgICAgKi8KICAgIHByaXZhdGUg
c3RhdGljIFN0cmluZyBnZXRUZXh0VmFsdWUoRWxlbWVudCBlbGUsIFN0cmluZyB0YWdOYW1lLFN0
cmluZyBkZWZhdWx0VmFsKSB7CiAgICAgICAgU3RyaW5nIHRleHRWYWwgPSBkZWZhdWx0VmFsOwog
ICAgICAgIE5vZGVMaXN0IG5sID0gZWxlLmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZ05hbWUpOwog
ICAgICAgIGlmKG5sICE9IG51bGwgJiYgbmwuZ2V0TGVuZ3RoKCkgPiAwKSB7CiAgICAgICAgICAg
IEVsZW1lbnQgZWwgPSAoRWxlbWVudClubC5pdGVtKDApOwogICAgICAgICAgICBpZiAoIGVsICE9
IG51bGwgKSB7CiAgICAgICAgICAgIAl0ZXh0VmFsID0gKGVsLmdldEZpcnN0Q2hpbGQoKSA9PSBu
dWxsKT8iIjplbC5nZXRGaXJzdENoaWxkKCkuZ2V0Tm9kZVZhbHVlKCk7CiAgICAgICAgICAgIH0K
ICAgICAgICB9CgogICAgICAgIHJldHVybiB0ZXh0VmFsOwogICAgfQogICAgcHJpdmF0ZSBzdGF0
aWMgdm9pZCBwdXRDb25uZWN0aW9uTWFuYWdlclByb3BlcnRpZXMoSURhdGEgY29ubmVjdGlvbk1h
bmFnZXJQcm9wLEVsZW1lbnQgcHJvcGVydGllcyl0aHJvd3MgRXhjZXB0aW9uCiAgICB7CiAgICAg
ICAgSURhdGEgaW5wdXQgPSBJRGF0YUZhY3RvcnkuY3JlYXRlKCk7CiAgICAgICAgU2VydmljZS5k
b0ludm9rZShOU19GRVRDSF9NRVRBREEsIGlucHV0KTsKICAgICAgICBJRGF0YUV4dGVuc2lvbiBj
b25uTWFuYWdlclByb3AgPSBuZXcgSURhdGFFeHRlbnNpb24oY29ubmVjdGlvbk1hbmFnZXJQcm9w
KTsKICAgICAgICBJRGF0YVtdIHBhcmFtcyAgICAgICAgID0gKElEYXRhW10pSURhdGFFeHRlbnNp
b24uZ2V0KGlucHV0LCAiY29ubmVjdGlvbk1hbmFnZXJQcm9wZXJ0aWVzIik7CgogICAgICAgIGZv
ciAoaW50IGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKQogICAgICAgIHsKICAgICAgICAg
ICAgSURhdGEgcGFyYW0gPSBwYXJhbXNbaV07CiAgICAgICAgICAgIFN0cmluZyBwcm9wTmFtZSAg
ICAgPSAoU3RyaW5nKUlEYXRhRXh0ZW5zaW9uLmdldChwYXJhbSwgInN5c3RlbU5hbWUiKTsKICAg
ICAgICAgICAgU3RyaW5nIGRlZmF1bHRWYWx1ZSA9ICAoU3RyaW5nKUlEYXRhRXh0ZW5zaW9uLmdl
dChwYXJhbSwgImRlZmF1bHRWYWx1ZSIpOwogICAgICAgICAgICBTdHJpbmcgcHJvcFZhbHVlICAg
ID0gKGdldFRleHRWYWx1ZShwcm9wZXJ0aWVzLHByb3BOYW1lLGRlZmF1bHRWYWx1ZSkpLnRyaW0o
KTsKCiAgICAgICAgICAgIGNvbm5NYW5hZ2VyUHJvcC5zZXQocHJvcE5hbWUscHJvcFZhbHVlLmxl
bmd0aCgpPD0wP2RlZmF1bHRWYWx1ZTpwcm9wVmFsdWUpOwogICAgICAgIH0KCiAgICB9CgogICAg
cHJpdmF0ZSBzdGF0aWMgdm9pZCBwdXRDb25uZWN0aW9uUHJvcGVydGllcyhJRGF0YSBjb25uZWN0
aW9uUHJvcCxFbGVtZW50IHByb3BlcnRpZXMpIHRocm93cyBFeGNlcHRpb24KICAgIHsKICAgICAg
ICBDbGFzczw/PiBmYWN0b3J5Q2xhc3MgPSBDbGFzcy5mb3JOYW1lKEZBQ1RPUllfVFlQRSk7CiAg
ICAgICAgQ2xhc3M8Pz4gc3RvcENsYXNzID0gQ2xhc3MuZm9yTmFtZShTVE9QX0NMQVNTKTsKCiAg
ICAgICAgSURhdGFFeHRlbnNpb24gY29ublByb3AgPSBuZXcgSURhdGFFeHRlbnNpb24oY29ubmVj
dGlvblByb3ApOwoKICAgICAgICBCZWFuSW5mbyBiZWFuSW5mbyA9IG51bGw7CiAgICAgICAgUHJv
cGVydHlEZXNjcmlwdG9yW10gZGVzY3JpcHRvcnM7CiAgICAgICAgYmVhbkluZm8gPSBJbnRyb3Nw
ZWN0b3IuZ2V0QmVhbkluZm8oZmFjdG9yeUNsYXNzLHN0b3BDbGFzcyk7CiAgICAgICAgZGVzY3Jp
cHRvcnMgPSBiZWFuSW5mby5nZXRQcm9wZXJ0eURlc2NyaXB0b3JzKCk7CiAgICAgICAgZm9yIChp
bnQgaSA9IDA7IGkgPCBkZXNjcmlwdG9ycy5sZW5ndGg7IGkrKykKICAgICAgICB7CiAgICAgICAg
ICAgIGlmKGRlc2NyaXB0b3JzW2ldLmdldFdyaXRlTWV0aG9kKCkgIT0gbnVsbCkKICAgICAgICAg
ICAgewogICAgICAgICAgICAgICAgU3RyaW5nIHByb3BOYW1lICA9IGRlc2NyaXB0b3JzW2ldLmdl
dE5hbWUoKTsKICAgICAgICAgICAgICAgIFN0cmluZyBwcm9wVmFsdWUgPSBnZXRUZXh0VmFsdWUo
cHJvcGVydGllcyxwcm9wTmFtZSxudWxsKTsKCiAgICAgICAgICAgICAgICBjb25uUHJvcC5zZXQo
cHJvcE5hbWUscHJvcFZhbHVlIT1udWxsP3Byb3BWYWx1ZS50cmltKCk6cHJvcFZhbHVlKTsKICAg
ICAgICAgICAgfQogICAgICAgIH0KCiAgICB9CgogICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBzZXRD
cmVhdGVDb25uZWN0aW9uUmVzcG9uc2UoSURhdGEgcGlwZWxpbmUsU3RyaW5nIGNvbm5lY3Rpb25B
bGlhcyxTdHJpbmcgc3RhdHVzLFN0cmluZyBlcnJvcixpbnQgaSkKICAgIHsKICAgICAgICAgSURh
dGEgcmVzID0gSURhdGFGYWN0b3J5LmNyZWF0ZSgpOwogICAgICAgICBJRGF0YUV4dGVuc2lvbiBy
ZXNQaXBlTGluZSA9IG5ldyBJRGF0YUV4dGVuc2lvbihyZXMpOwogICAgICAgICBpZihlcnJvciAh
PSBudWxsKQogICAgICAgICAgcmVzUGlwZUxpbmUuc2V0KCJlcnJvckRldGFpbCIsZXJyb3IpOwog
ICAgICAgICByZXNQaXBlTGluZS5zZXQoInN0YXR1cyIsc3RhdHVzKTsKICAgICAgICAgcmVzUGlw
ZUxpbmUuc2V0KCJjb25uZWN0aW9uQWxpYXMiLGNvbm5lY3Rpb25BbGlhcyk7CiAgICAgICAgIElE
YXRhRXh0ZW5zaW9uLmFwcGVuZChwaXBlbGluZSwiQ29ubmVjdGlvblsiK2krIl0iLHJlcyk7CiAg
ICB9CgoKICAgIC8vICBDb21wYXJlIHRoZSBvbGQgcGFzc3dvcmQgZW50ZXJlZCB3aXRoIHRoZSBw
YXNzd29yZCBhbHJlYWR5IGV4aXN0aW5nLCBiYXNlZCBvbiB0aGUgbm9kZSB2ZXJzaW9uLgogICAg
cHJpdmF0ZSBzdGF0aWMgYm9vbGVhbiBjb21wYXJlUGFzc3dvcmRzKElEYXRhIHBpcGVsaW5lLFN0
cmluZyBpbnB1dFBhc3N3b3JkKSB0aHJvd3MgRXhjZXB0aW9uCiAgICB7CiAgICAgICAgaW5wdXRQ
YXNzd29yZCA9IChpbnB1dFBhc3N3b3JkID09IG51bGwpPyIiOmlucHV0UGFzc3dvcmQ7CiAgICAg
ICAgYm9vbGVhbiBpc0VxdWFsID0gZmFsc2U7CgogICAgICAgIFNlcnZpY2UuZG9JbnZva2UoTlNf
RkVUQ0hfQ09OTl9EQVRBLCBwaXBlbGluZSk7CiAgICAgICAgU3RyaW5nIG5vZGVOYW1lID0gVmFs
dWVzRW11bGF0b3IuZ2V0U3RyaW5nKHBpcGVsaW5lLCBDT05OX0FMSUFTKTsKICAgICAgICBDb25u
ZWN0aW9uRGF0YU5vZGUgbm9kZSA9IENvbm5lY3Rpb25EYXRhTm9kZU1hbmFnZXIuZ2V0Q29ubmVj
dGlvbkRhdGFOb2RlKG5vZGVOYW1lKTsKICAgICAgICAKICAgICAgICBJRGF0YVtdIHBhcmFtcyAg
ICAgICAgID0gKElEYXRhW10pSURhdGFFeHRlbnNpb24uZ2V0KHBpcGVsaW5lLCAicGFyYW1ldGVy
cyIpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKQogICAg
ICAgIHsKICAgICAgICAgICAgICBJRGF0YSBwYXJhbSA9IHBhcmFtc1tpXTsKCiAgICAgICAgICAg
ICAgU3RyaW5nIHBhc3N3b3JkRmllbGQgPSAoU3RyaW5nKUlEYXRhRXh0ZW5zaW9uLmdldChwYXJh
bSwgInN5c3RlbU5hbWUiKTsKCiAgICAgICAgICAgICAgaWYocGFzc3dvcmRGaWVsZCAhPSBudWxs
ICYmIHBhc3N3b3JkRmllbGQuZXF1YWxzKCJwYXNzd29yZCIpKQogICAgICAgICAgICAgIHsKCiAg
ICAgICAgICAgICAgICAgU3RyaW5nIHBhc3N3b3JkVmFsdWUgPSAoU3RyaW5nKUlEYXRhRXh0ZW5z
aW9uLmdldChwYXJhbSwgInZhbHVlIik7CgogICAgICAgICAgICAgICAgIC8vQmFzZWQgb24gbm9k
ZSB2ZXJzaW9uIG9sZCBhbmQgbmV3IHBhc3N3b3JkIHdpbGwgYmUgY29tcGFyZWQuCiAgICAgICAg
ICAgICAgICAgU3RyaW5nIHBhc3N3b3JkID0gIiI7CiAgICAgICAgICAgICAgICAgaWYobm9kZS5n
ZXRfbm9kZVZlcnNpb24oKT09IENvbm5lY3Rpb25EYXRhTm9kZS5WRVJTSU9OX09ORV9WQUxVRSl7
CiAgICAgICAgICAgICAgICAJIHBhc3N3b3JkID0gY29tLndtLnBrZy5hcnQudXRpbC5TdHJpbmdV
dGlsLmRlY1N0cmluZyhwYXNzd29yZFZhbHVlKTsKICAgICAgICAgICAgICAgICB9ZWxzZSBpZihu
b2RlLmdldF9ub2RlVmVyc2lvbigpID09IENvbm5lY3Rpb25EYXRhTm9kZS5WRVJTSU9OX1RXT19W
QUxVRSl7CiAgICAgICAgICAgICAgICAJIHBhc3N3b3JkID0gY29tLndtLnBrZy5hcnQudXRpbC5T
dHJpbmdVdGlsLmdldEZyb21QYXNzbWFuKHBhc3N3b3JkVmFsdWUpOwogICAgICAgICAgICAgICAg
IH0KICAgICAgICAgICAgICAgIAkgCiAgICAgICAgICAgICAgICAgaXNFcXVhbCA9IHBhc3N3b3Jk
LmVxdWFscyhpbnB1dFBhc3N3b3JkKTsKCiAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAg
ICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGlzRXF1YWw7CiAgICB9CgogICAgcHJp
dmF0ZSBzdGF0aWMgQWRhcHRlclNlcnZpY2VFeGNlcHRpb24gY3JlYXRlQWRhcHRlclNlcnZpY2VF
eGNlcHRpb24oaW50IG1pbm9yQ29kZSwgU3RyaW5nW10gcGFybSkKICAgIHsKICAgICAgICBXbUFk
YXB0ZXIgYWRwSW5zdCA9IEpEQkNBZGFwdGVyLmdldEluc3RhbmNlKCk7CiAgICAgICAgQWRhcHRl
clNlcnZpY2VFeGNlcHRpb24gZXggPQogICAgICAgICAgICBuZXcgQWRhcHRlclNlcnZpY2VFeGNl
cHRpb24oYWRwSW5zdC5nZXRBZGFwdGVyUmVzb3VyY2VCdW5kbGVNYW5hZ2VyKCksCiAgICAgICAg
ICAgIEludGVnZXIudG9TdHJpbmcoYWRwSW5zdC5nZXRBZGFwdGVyTWFqb3JDb2RlKCkpLCBJbnRl
Z2VyLnRvU3RyaW5nKG1pbm9yQ29kZSksCiAgICAgICAgICAgIHBhcm0sIG51bGwsIG51bGwpOwog
ICAgICAgIHJldHVybiBleDsKICAgIH0KCiAgICBwcml2YXRlIHN0YXRpYyBBZGFwdGVyU2Vydmlj
ZUV4Y2VwdGlvbiBjcmVhdGVBZGFwdGVyU2VydmljZUV4Y2VwdGlvbihpbnQgbWlub3JDb2RlLCBU
aHJvd2FibGUgdCkKICAgIHsKICAgICAgICBXbUFkYXB0ZXIgYWRwSW5zdCA9IEpEQkNBZGFwdGVy
LmdldEluc3RhbmNlKCk7CiAgICAgICAgQWRhcHRlclNlcnZpY2VFeGNlcHRpb24gZXggPQogICAg
ICAgICAgICBuZXcgQWRhcHRlclNlcnZpY2VFeGNlcHRpb24oYWRwSW5zdC5nZXRBZGFwdGVyUmVz
b3VyY2VCdW5kbGVNYW5hZ2VyKCksCiAgICAgICAgICAgIEludGVnZXIudG9TdHJpbmcoYWRwSW5z
dC5nZXRBZGFwdGVyTWFqb3JDb2RlKCkpLCBJbnRlZ2VyLnRvU3RyaW5nKG1pbm9yQ29kZSksCiAg
ICAgICAgICAgIG51bGwsIG51bGwsIG51bGwsdCk7CiAgICAgICAgcmV0dXJuIGV4OwogICAgfQoK
ICAgIHByaXZhdGUgc3RhdGljIEFkYXB0ZXJTZXJ2aWNlRXhjZXB0aW9uIGNyZWF0ZUFkYXB0ZXJT
ZXJ2aWNlRXhjZXB0aW9uKGludCBtaW5vckNvZGUsU3RyaW5nW10gcGFyYW0sIFRocm93YWJsZSB0
KQogICAgewogICAgICAgIFdtQWRhcHRlciBhZHBJbnN0ID0gSkRCQ0FkYXB0ZXIuZ2V0SW5zdGFu
Y2UoKTsKICAgICAgICBBZGFwdGVyU2VydmljZUV4Y2VwdGlvbiBleCA9CiAgICAgICAgICAgIG5l
dyBBZGFwdGVyU2VydmljZUV4Y2VwdGlvbihhZHBJbnN0LmdldEFkYXB0ZXJSZXNvdXJjZUJ1bmRs
ZU1hbmFnZXIoKSwKICAgICAgICAgICAgSW50ZWdlci50b1N0cmluZyhhZHBJbnN0LmdldEFkYXB0
ZXJNYWpvckNvZGUoKSksIEludGVnZXIudG9TdHJpbmcobWlub3JDb2RlKSwKICAgICAgICAgICAg
cGFyYW0sIG51bGwsIG51bGwsdCk7CiAgICAgICAgcmV0dXJuIGV4OwogICAgfQoK</value>
  <value name="encodeutf8">true</value>
</Values>
