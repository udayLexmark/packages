<?xml version="1.0" encoding="UTF-8"?>

<Values version="2.0">
  <value name="name">getFormattedDestinationURL</value>
  <value name="encodeutf8">true</value>
  <value name="body">SURhdGFDdXJzb3IgY3Vyc29yICAgICAgICAgICAgPSBwaXBlbGluZS5nZXRDdXJzb3IoKTsKRGVz
dGluYXRpb24gZGVzdGluYXRpb24gICAgICAgPSBudWxsOwpEZXN0aW5hdGlvbiBvdXRwdXREZXN0
aW5hdGlvbiA9IG51bGw7CkVudW1lcmF0aW9uIGRlc3RpbmF0aW9uRW51bSAgID0gbnVsbDsKU3Ry
aW5nIHBhcnRuZXJJRCAgICAgICAgICAgICAgPSBudWxsOwpTdHJpbmcgcHJvdG9jb2wgICAgICAg
ICAgICAgICA9IG51bGw7ICAKU3RyaW5nIHByaW1hcnlTdHJpbmcgICAgICAgICAgPSBudWxsOwpT
dHJpbmcgdXNlck5hbWUgICAgCQkJICA9IG51bGw7ClN0cmluZyBwYXNzd29yZAkJCQkgID0gbnVs
bDsKU3RyaW5nIHVybAkJCQkJICA9IG51bGw7ClN0cmluZyBob3N0CQkJCQkgID0gbnVsbDsKU3Ry
aW5nIHBvcnQJCQkJCSAgPSBudWxsOwpTdHJpbmcgbG9jYXRpb24JCQkJICA9IG51bGw7CmJvb2xl
YW4gcHJpbWFyeSAgICAgICAgICAgICAgID0gdHJ1ZTsgCiAKaWYgKGN1cnNvci5maXJzdCgicGFy
dG5lcklEIikpCnsKCXBhcnRuZXJJRCA9IChTdHJpbmcpY3Vyc29yLmdldFZhbHVlKCk7ICAKfQpl
bHNlCnsKCXRocm93IG5ldyBTZXJ2aWNlRXhjZXB0aW9uKCJNaXNzaW5nIGlucHV0ICdwYXJ0bmVy
SUQnIik7Cn0gCgppZiAoY3Vyc29yLmZpcnN0KCJwcm90b2NvbCIpKQp7Cglwcm90b2NvbCA9IChT
dHJpbmcpY3Vyc29yLmdldFZhbHVlKCk7ICAKfQoKaWYgKGN1cnNvci5maXJzdCgicHJpbWFyeSIp
KQp7CglwcmltYXJ5U3RyaW5nID0gKFN0cmluZyljdXJzb3IuZ2V0VmFsdWUoKTsKCWlmIChwcmlt
YXJ5U3RyaW5nLmVxdWFsc0lnbm9yZUNhc2UoImZhbHNlIikpCgl7CgkJcHJpbWFyeSA9IGZhbHNl
OwoJfQp9Cgp0cnkKeyAKCVByb2ZpbGUgcHJvZmlsZSA9IFByb2ZpbGVTdG9yZS5nZXRQcm9maWxl
U3RvcmUoKS5nZXRQcm9maWxlKHBhcnRuZXJJRCk7CgkKCS8vIFByZWZlcnJlZCBpcyB0aGUgZGVm
YXVsdC4KCWlmICggKHByb3RvY29sID09IG51bGwpIHx8IChwcm90b2NvbC5lcXVhbHNJZ25vcmVD
YXNlKCJwcmVmZXJyZWQiKSkgfHwgKHByb3RvY29sLmVxdWFscygiIikpICkgCgl7CgkJLy8gR2V0
IHRoZSBwcmVmZXJyZWQgZGVzdGluYXRpb24uIAoJCW91dHB1dERlc3RpbmF0aW9uID0gcHJvZmls
ZS5nZXRQcmVmZXJyZWREZXN0aW5hdGlvbigpOwoJfQoJLy8gUmV0cmlldmUgdGhlIHNwZWNpZmlj
IGRlc3RpbmF0aW9uLgoJZWxzZQoJewoJCS8vIEdldCB0aGUgZGVzdGluYXRpb25zIGZvciB0aGlz
IHByb2ZpbGUuCgkJZGVzdGluYXRpb25FbnVtID0gcHJvZmlsZS5nZXREZXN0aW5hdGlvbnMoKTsK
CgkJLy8gU2VhcmNoIHRoZSBsaXN0IG9mIGRlc3RpbmF0aW5zIGZvciB0aGlzIHByb2ZpbGUuCgkJ
d2hpbGUgKCAoZGVzdGluYXRpb25FbnVtLmhhc01vcmVFbGVtZW50cygpKSAmJiAob3V0cHV0RGVz
dGluYXRpb24gPT0gbnVsbCkgKQoJCXsKCQkJZGVzdGluYXRpb24gPSAoRGVzdGluYXRpb24pIGRl
c3RpbmF0aW9uRW51bS5uZXh0RWxlbWVudCgpOwoKCQkJLy8gTWFrZSBzdXJlIHRoZSBwcmltYXJ5
IGZsYWcgbWF0Y2hlcy4JCQkKCQkJaWYgKHByaW1hcnkgJiYgZGVzdGluYXRpb24uaXNQcmltYXJ5
KCkgfHwgIXByaW1hcnkgJiYgIWRlc3RpbmF0aW9uLmlzUHJpbWFyeSgpKQogICAgCQl7CgkJCQkv
LyBTZWUgaWYgdGhlIHByb3RvY29sIG1hdGNoZXMKCQkJICAgIGlmIChwcm90b2NvbC5lcXVhbHNJ
Z25vcmVDYXNlKGRlc3RpbmF0aW9uLmdldFByb3RvY29sKCkpKQogICAgCQkJewoJCQkJCW91dHB1
dERlc3RpbmF0aW9uID0gZGVzdGluYXRpb247CgkJCQl9CiAgICAJCX0KCQl9Cgl9CgoJaWYgKG91
dHB1dERlc3RpbmF0aW9uICE9IG51bGwpIHsKCQl1c2VyTmFtZSA9IG91dHB1dERlc3RpbmF0aW9u
LmdldFVzZXIoKTsKCQlwYXNzd29yZCA9IG91dHB1dERlc3RpbmF0aW9uLmdldFBhc3N3b3JkKCk7
CgkJcHJvdG9jb2wgPSBvdXRwdXREZXN0aW5hdGlvbi5nZXRQcm90b2NvbCgpOwoJCWhvc3QgICAg
ID0gb3V0cHV0RGVzdGluYXRpb24uZ2V0SG9zdCgpOwoJCXBvcnQgICAgID0gb3V0cHV0RGVzdGlu
YXRpb24uZ2V0UG9ydCgpOwoJCWxvY2F0aW9uID0gb3V0cHV0RGVzdGluYXRpb24uZ2V0TG9jYXRp
b24oKTsKCQkKCQlpZiAoaG9zdCA9PSBudWxsKSBob3N0ID0gIiI7CgkJaWYgKHBvcnQgPT0gbnVs
bCkgcG9ydCA9ICIiOwoJCWlmIChsb2NhdGlvbiA9PSBudWxsKSBsb2NhdGlvbiA9ICIiOwoJCQoJ
CWlmICggKHByb3RvY29sLmVxdWFsc0lnbm9yZUNhc2UoImh0dHAiKSkgCgkJCXx8IChwcm90b2Nv
bC5lcXVhbHNJZ25vcmVDYXNlKCJodHRwcyIpKSApCgkJewoJCQlpZiAoIXBvcnQuZXF1YWxzKCIi
KSkgCgkJCXsKCQkJCXBvcnQgPSAiOiIgKyBwb3J0OyAgCgkJCX0KCQkJdXJsID0gcHJvdG9jb2wg
KyAiOi8vIiArIGhvc3QgKyBwb3J0ICsgbG9jYXRpb247CgkJfQoJCWVsc2UgaWYgKHByb3RvY29s
LmVxdWFsc0lnbm9yZUNhc2UoImZ0cCIpKQoJCXsKCQkJU3RyaW5nIHVzZXJOYW1lUGFzc3dvcmRT
dHJpbmcgPSAiIjsKCQkKCQkJaWYgKHVzZXJOYW1lICE9IG51bGwpIAoJCQl7CgkJCQl1c2VyTmFt
ZVBhc3N3b3JkU3RyaW5nID0gdXNlck5hbWVQYXNzd29yZFN0cmluZyArIHVzZXJOYW1lOwoJCQl9
CgoJCQlpZiAocGFzc3dvcmQgIT0gbnVsbCkKCQkJewoJCQkJdXNlck5hbWVQYXNzd29yZFN0cmlu
ZyA9IHVzZXJOYW1lUGFzc3dvcmRTdHJpbmcgKyAiOiIgKyBwYXNzd29yZDsKCQkJfQoJCQkKCQkJ
aWYgKCF1c2VyTmFtZVBhc3N3b3JkU3RyaW5nLmVxdWFscygiIikpIAoJCQl7CgkJCQl1c2VyTmFt
ZVBhc3N3b3JkU3RyaW5nID0gdXNlck5hbWVQYXNzd29yZFN0cmluZyArICJAIjsKCQkJfQoJCQkJ
CgkJCWlmICghcG9ydC5lcXVhbHMoIiIpKSAKCQkJewoJCQkJcG9ydCA9ICI6IiArIHBvcnQ7ICAK
CQkJfQoKCQkJdXJsID0gImZ0cDovLyIgKyB1c2VyTmFtZVBhc3N3b3JkU3RyaW5nICsgaG9zdCAr
IHBvcnQgKyBsb2NhdGlvbjsKCQl9Cgl9CgoJLy8gUmV0dXJuIHRoZSBvdXRwdXREZXN0aW5hdGlv
bgoJY3Vyc29yLmxhc3QoKTsKCWN1cnNvci5pbnNlcnRBZnRlcigidXJsIiwgdXJsKTsKCWN1cnNv
ci5pbnNlcnRBZnRlcigicGFzc3dvcmQiLCBwYXNzd29yZCk7CgljdXJzb3IuaW5zZXJ0QWZ0ZXIo
InVzZXJOYW1lIiwgdXNlck5hbWUpOwoKCWN1cnNvci5kZXN0cm95KCk7Cn0KY2F0Y2ggKFByb2Zp
bGVTdG9yZUV4Y2VwdGlvbiBwc2UpCnsKCXRocm93IG5ldyBTZXJ2aWNlRXhjZXB0aW9uKHBzZSk7
Cn0K</value>
</Values>
